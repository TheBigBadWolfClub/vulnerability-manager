import React from 'react'

let myReducer = (state, action) => {
  switch (action.type) {
    case "LOGIN":
      localStorage.setItem("authData", JSON.stringify(action.authData));
      return { ...state,  ...action.authData};
    case "LOGOUT":
      localStorage.clear();
      return { ...{}};
    default:
      return;
  }
};

const jsonToken = JSON.parse(localStorage.getItem('authData')) || {};
const LoginCtx = React.createContext(jsonToken);
function LoginCtxProvider(props) {
  const [authState, dispatchAuth] = React.useReducer(myReducer, jsonToken);
  return (
    <LoginCtx.Provider value={{ authState, dispatchAuth }}>
      {props.children}
    </LoginCtx.Provider>
  );
}
export { LoginCtx, LoginCtxProvider };
