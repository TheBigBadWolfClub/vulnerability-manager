import React from 'react'
import {NavLink} from 'react-router-dom'
import {LoginCtx} from '../../context/LoginContext'
import './MainNavigation.css'

export default function MainNavigation(props) {

  const {authState, dispatchAuth} = React.useContext(LoginCtx)

  const handleLogout = (event) => {
    event.preventDefault()
    dispatchAuth({type: "LOGOUT", authData: {}})
  }

  return (
    <React.Fragment>
      <header className="main-navigation">
        <div className="main-navigation-logo">
          <h1>Vulnerability Manager</h1>
        </div>
        <nav className="main-navigation-items">
          <ul>
            {authState.token && <li><NavLink to="/create-vulnerability">Create</NavLink></li>}
            <li><NavLink to="/vulnerabilities">Vulnerabilities</NavLink></li>
            {authState.token && <li><NavLink to="/cvss">cvss</NavLink></li>}
            {!authState.token && <li><NavLink to="/login">Login</NavLink></li>}
            {authState.token && <li>
              <button onClick={handleLogout}>Logout</button>
            </li>}
          </ul>
        </nav>
      </header>
    </React.Fragment>
  )
}

